[sources.host_metrics]
title = "Host Metrics"
noun = "Host Metrics"
beta = true
common = false
delivery_guarantee = "at_least_once"
features = [
  "Gather host-based metrics.",
]
function_category = "collect"
output_types = ["metric"]
requirements = {}
strategies = ["daemon", "sidecar", "service"]
through_description = "local system data sources"

<%= render("_partials/fields/_component_options.toml", type: "source", name: "host_metrics") %>

[sources.host_metrics.options.collectors]
type = "[string]"
common = false
required = false
description = "The list of host metric collector services to use. Defaults to all collectors."

[sources.host_metrics.options.collectors.enum]
cpu = "Metrics related to CPU utilization."
disk = "Metrics related to disk I/O utilization."
filesystem = "Metrics related to filesystem space utilization."
load = "Load average metrics (UNIX only)."
memory = "Metrics related to memory utilization."
network = "Metrics related to network utilization."

[sources.host_metrics.options.namespace]
type = "string"
common = false
required = false
default = "host"
description = "The namespace prefix that will be added to all metric names."

[sources.host_metrics.options.scrape_interval_secs]
type = "integer"
common = false
required = false
default = 15
description = "The interval between metric gathering, in seconds."

[sources.host_metrics.options.disk]
type = "table"
category = "Filesystem"
description = "Options for the \"disk\" metrics collector."

[sources.host_metrics.options.disk.options.devices]
type = "[string]"
required = false
examples = [["sda"], ["sd*"], ["!dm-*"]
description = """\
The list of devices for which to gather I/O metrics. \
Defaults to all devices.\
"""

[sources.host_metrics.options.filesystem]
type = "table"
category = "Filesystem"
description = "Options for the \"filesystem\" metrics collector."

[sources.host_metrics.options.filesystem.options.devices]
type = "[string]"
required = false
examples = [["sda"], ["sd*"], ["!dm-*"]]
description = """\
The list of filesystem devices for which to gather metrics. \
Defaults to all devices.\
"""

[sources.host_metrics.options.filesystem.options.filesystems]
type = "[string]"
required = false
examples = [["ntfs"], ["ext*"], ["!nfs*"]]
description = """\
The list of filesystem type names for which to gather metrics. \
Defaults to all types.\
"""

[sources.host_metrics.options.filesystem.options.mountpoints]
type = "[string]"
required = false
examples = [["/"], ["/home*"], ["!/usr*"]]
description = """\
The list of filesystem mount points for which to gather metrics. \
Defaults to all mount points.\
"""

[sources.host_metrics.options.network]
type = "table"
category = "Network"
description = "Options for the \"network\" metrics collector."

[sources.host_metrics.options.network.options.devices]
type = "[string]"
required = false
examples = [["eth0"], ["en*"], ["!docker*"]]
description = """\
The list of network devices for which to gather metrics. \
Defaults to all local network devices.\
"""
